# In order for Websockets to work, add this to a custom location (/):

proxy_set_header    Upgrade     $http_upgrade;
proxy_set_header    Connection  "Upgrade";
proxy_set_header    X-Real-IP   $remote_addr;
proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header    X-Forwarded-Proto $scheme;
proxy_set_header    X-Frame-Options SAMEORIGIN;
proxy_read_timeout 86400s;
proxy_send_timeout 86400s;
proxy_headers_hash_max_size 1024;
proxy_headers_hash_bucket_size 128;

# Test websockets with:
curl -i -N -H "Connection: Upgrade" -H "Upgrade: websocket" -H "Host: your-url" -H "Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==" -H "Sec-WebSocket-Version: 13" <your-url>/ws/status/